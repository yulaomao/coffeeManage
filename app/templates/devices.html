{% extends 'layout.html' %}
{% block content %}
<h3>设备列表</h3>
<table class="table table-sm">
	<thead><tr><th>设备ID</th><th>别名</th><th>状态</th><th>固件</th><th>Last Seen</th></tr></thead>
	<tbody id="tb"></tbody>
</table>
<script>
fetch('/api/v1/devices',{headers:{'X-Role':'admin'}}).then(r=>r.json()).then(({data})=>{
	const tb=document.getElementById('tb');
	tb.innerHTML=(data||[]).map(d=>`<tr><td><a href='/devices/${d.device_id}'>${d.device_id}</a></td><td>${d.alias||''}</td><td>${d.status||''}</td><td>${d.fw_version||''}</td><td>${d.last_seen_ts||''}</td></tr>`).join('')
})
</script>
{% endblock %}

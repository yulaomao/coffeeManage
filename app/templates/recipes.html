{% extends 'layout.html' %}
{% block content %}
<h3>配方管理</h3>
<div class="d-flex mb-2">
  <button class="btn btn-sm btn-success" onclick="addRecipe()">新增</button>
</div>
<ul id="list" class="list-group"></ul>
<script>
const hdr={'X-Role':'admin','Content-Type':'application/json'}
function load(){fetch('/api/v1/recipes/enabled',{headers:hdr}).then(r=>r.json()).then(x=>{document.getElementById('list').innerHTML = x.data.map(id=>`<li class='list-group-item'>${id}</li>`).join('')})}
function addRecipe(){const id=prompt('配方ID','r-1'); if(!id) return; fetch('/api/v1/recipes',{method:'POST',headers:hdr,body:JSON.stringify({id,name:id,enabled:true})}).then(load)}
load()
</script>
{% endblock %}
